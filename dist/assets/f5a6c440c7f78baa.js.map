{"version":3,"file":"f5a6c440c7f78baa.js","mappings":"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","sources":["webpack://tastatur.com/./packages/mkboard-widget/lib/components/text/Kbd.tsx","webpack://tastatur.com/./packages/mkboard-widget/lib/components/text/Kbd.module.less?90e0","webpack://tastatur.com/./packages/mkboard-widget/lib/hooks/use-document-visibility.ts","webpack://tastatur.com/./packages/page-typing-test/lib/session/types.ts","webpack://tastatur.com/./packages/page-typing-test/lib/session/duration.ts","webpack://tastatur.com/./packages/page-typing-test/lib/session/replaystate.ts","webpack://tastatur.com/./packages/page-typing-test/lib/session/session.ts","webpack://tastatur.com/./packages/page-typing-test/lib/settings.ts","webpack://tastatur.com/./packages/mkboard-widget/lib/utils/animationframes.ts","webpack://tastatur.com/./packages/page-typing-test/lib/components/ReplayProgress.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/Replay.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/Replay.module.less?ff18","webpack://tastatur.com/./packages/page-typing-test/lib/components/ReportScreen.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/ReportScreen.module.less?244d","webpack://tastatur.com/./packages/page-typing-test/lib/components/settings/text/BookSettings.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/settings/text/CommonWordsSettings.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/settings/text/PseudoWordsSettings.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/settings/TextGeneratorSettings.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/generators/book.ts","webpack://tastatur.com/./packages/page-typing-test/lib/generators/pseudowords.ts","webpack://tastatur.com/./packages/page-typing-test/lib/generators/commonwords.ts","webpack://tastatur.com/./packages/page-typing-test/lib/generators/TextGeneratorLoader.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/LineTemplate.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/LineTemplate.module.less?b992","webpack://tastatur.com/./packages/page-typing-test/lib/components/TestProgress.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/TestProgress.module.less?fe9e","webpack://tastatur.com/./packages/page-typing-test/lib/components/TestScreen.module.less?e6b5","webpack://tastatur.com/./packages/page-typing-test/lib/components/Toolbar.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/Toolbar.module.less?0f18","webpack://tastatur.com/./packages/page-typing-test/lib/components/TestScreen.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/views.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/components/SettingsScreen.tsx","webpack://tastatur.com/./packages/page-typing-test/lib/TypingTestPage.tsx","webpack://tastatur.com/./packages/mkboard-pages-browser/lib/pages/typing-test.tsx"],"sourcesContent":["import { clsx } from \"clsx\";\nimport { type ReactNode } from \"react\";\nimport * as styles from \"./Kbd.module.less\";\nimport { type KbdProps } from \"./Kbd.types.ts\";\n\nexport function Kbd(props: KbdProps): ReactNode {\n  const { as: Component = \"kbd\", id, title, className, children } = props;\n  return (\n    <Component id={id} className={clsx(styles.root, className)} title={title}>\n      {children}\n    </Component>\n  );\n}\n","// extracted by mini-css-extract-plugin\nvar _1 = \"qmWqrcoprm\";\nexport { _1 as \"root\" }\n","import { useState } from \"react\";\nimport { useDocumentEvent } from \"./use-document-event.ts\";\n\nexport const useDocumentVisibility = () => {\n  const [visible, setVisible] = useState(isDocumentVisible());\n  useDocumentEvent(\"visibilitychange\", () => {\n    setVisible(isDocumentVisible());\n  });\n  return visible;\n};\n\nexport const isDocumentVisible = () => {\n  return document.visibilityState === \"visible\";\n};\n","import {\n  type Line,\n  type LineList,\n  type Stats,\n  type Step,\n  type TextDisplaySettings,\n  type TextInputSettings,\n} from \"@mkboard/textinput\";\nimport { type AnyEvent } from \"@mkboard/textinput-events\";\n\nexport enum DurationType {\n  Time = 1,\n  Length = 2,\n}\n\nexport type Duration = {\n  readonly type: DurationType;\n  readonly value: number;\n};\n\nexport type Progress = {\n  /** Time passed in millis. */\n  readonly time: number;\n  /** Chars inputted. */\n  readonly length: number;\n  /** Progress made, [0, 1]. */\n  readonly progress: number;\n  /** Typing speed so far. */\n  readonly speed: number;\n};\n\nexport type SessionSettings = {\n  readonly duration: Duration;\n  readonly textInput: TextInputSettings;\n  readonly textDisplay: TextDisplaySettings;\n  readonly numLines: number;\n  readonly numCols: number;\n};\n\nexport type SessionLine = Line & {\n  readonly index: number;\n  readonly mark: unknown;\n  readonly text: string;\n  readonly progress: Progress | null;\n};\n\nexport type SessionLines = LineList<SessionLine>;\n\nexport type TestResult = {\n  readonly stats: Stats;\n  readonly steps: readonly Step[];\n  readonly events: readonly AnyEvent[];\n};\n","import { computeSpeed, type Step } from \"@mkboard/textinput\";\nimport { type Duration, DurationType, type Progress } from \"./types.ts\";\n\nexport function timeDuration(time: number): Duration {\n  return { type: DurationType.Time, value: time };\n}\n\nexport function lengthDuration(length: number): Duration {\n  return { type: DurationType.Length, value: length };\n}\n\nexport const duration_15_seconds = timeDuration(15_000);\nexport const duration_30_seconds = timeDuration(30_000);\nexport const duration_60_seconds = timeDuration(60_000);\nexport const duration_100_chars = lengthDuration(100);\nexport const duration_500_chars = lengthDuration(500);\nexport const duration_1000_chars = lengthDuration(1000);\n\nexport type NamedDuration = {\n  readonly label: string;\n  readonly duration: Duration;\n};\n\nexport const durations: readonly NamedDuration[] = [\n  { label: \"15 seconds\", duration: duration_15_seconds },\n  { label: \"30 seconds\", duration: duration_30_seconds },\n  { label: \"one minute\", duration: duration_60_seconds },\n  { label: \"100 characters\", duration: duration_100_chars },\n  { label: \"500 characters\", duration: duration_500_chars },\n  { label: \"1000 characters\", duration: duration_1000_chars },\n];\n\nexport function computeProgress(\n  duration: Duration,\n  steps: readonly Step[],\n): { progress: Progress; completed: boolean } {\n  const { length } = steps;\n  let time = 0;\n  let progress = 0;\n  let speed = 0;\n  let completed = false;\n  if (length > 0) {\n    const head = steps[0];\n    const curr = steps[length - 1];\n    time = curr.timeStamp - head.timeStamp;\n    speed = computeSpeed(length, time);\n    switch (duration.type) {\n      case DurationType.Time: {\n        progress = time / duration.value;\n        completed = time >= duration.value;\n        break;\n      }\n      case DurationType.Length: {\n        progress = length / duration.value;\n        completed = length >= duration.value;\n        break;\n      }\n    }\n  }\n  return {\n    progress: {\n      time,\n      length,\n      progress,\n      speed,\n    },\n    completed,\n  };\n}\n","import { type KeyId } from \"@mkboard/keyboard\";\nimport { Timer } from \"@mkboard/lang\";\nimport {\n  computeSpeed,\n  type Step,\n  TextInput,\n  type TextInputSettings,\n} from \"@mkboard/textinput\";\nimport { addKey, type AnyEvent, deleteKey } from \"@mkboard/textinput-events\";\nimport { type Progress } from \"./types.ts\";\n\nexport type State = \"starting\" | \"running\" | \"finished\";\n\nexport class ReplayState {\n  readonly #settings: TextInputSettings;\n  readonly #lines: readonly string[];\n  readonly #events: readonly AnyEvent[];\n  readonly #progress: ReplayProgress;\n  #state!: State;\n  #timer!: Timer;\n  #lineIndex!: number;\n  #eventIndex!: number;\n  #textInput!: TextInput;\n  #depressedKeys!: KeyId[];\n\n  constructor(\n    settings: TextInputSettings,\n    steps: readonly Step[],\n    events: readonly AnyEvent[],\n  ) {\n    this.#settings = settings;\n    this.#lines = splitLines(steps);\n    this.#events = shiftTimeStamps(events);\n    this.#progress = new ReplayProgress(steps);\n    this.reset(\"starting\");\n  }\n\n  reset(state: State = \"starting\") {\n    this.#progress.reset();\n    this.#state = state;\n    this.#timer = new Timer();\n    this.#lineIndex = 0;\n    this.#eventIndex = 0;\n    this.#textInput = this.#makeTextInput();\n    this.#depressedKeys = [];\n  }\n\n  get progress() {\n    return this.#progress;\n  }\n\n  get state() {\n    return this.#state;\n  }\n\n  get delay() {\n    switch (this.#state) {\n      case \"starting\":\n        return 3000;\n      case \"finished\":\n        return 3000;\n    }\n    const event = this.#events[this.#eventIndex];\n    return Math.max(0, event.timeStamp - this.#timer.elapsed);\n  }\n\n  step() {\n    switch (this.#state) {\n      case \"starting\":\n        this.reset(\"running\");\n        return;\n      case \"finished\":\n        this.reset(\"starting\");\n        return;\n    }\n    const event = this.#events[this.#eventIndex];\n    switch (event.type) {\n      case \"input\":\n        this.#textInput.onInput(event);\n        if (this.#textInput.completed) {\n          this.#lineIndex += 1;\n          if (this.#lineIndex < this.#lines.length) {\n            this.#textInput = this.#makeTextInput();\n          }\n        }\n        break;\n      case \"keydown\":\n        this.#depressedKeys = addKey(this.#depressedKeys, event.code);\n        break;\n      case \"keyup\":\n        this.#depressedKeys = deleteKey(this.#depressedKeys, event.code);\n        break;\n    }\n    this.#eventIndex += 1;\n    if (this.#events.length === this.#eventIndex) {\n      this.#state = \"finished\";\n    }\n  }\n\n  get chars() {\n    return this.#textInput.chars;\n  }\n\n  get lines() {\n    return this.#textInput.lines;\n  }\n\n  get depressedKeys() {\n    return this.#depressedKeys;\n  }\n\n  #makeTextInput() {\n    return new TextInput(this.#lines[this.#lineIndex], this.#settings, () => {\n      this.#progress.bump();\n    });\n  }\n}\n\nexport class ReplayProgress implements Progress {\n  readonly #steps: readonly Step[];\n  #index!: number;\n  #elapsed!: number;\n  #timer!: Timer;\n  #last!: number;\n  #speed!: number;\n\n  constructor(steps: readonly Step[]) {\n    this.#steps = [...steps];\n    this.reset();\n  }\n\n  reset() {\n    this.#index = 0;\n    this.#elapsed = 0;\n    this.#timer = new Timer();\n    this.#last = 0;\n    this.#speed = 0;\n  }\n\n  get time() {\n    if (this.#index === this.#steps.length) {\n      return (this.#last = this.#elapsed);\n    } else {\n      return (this.#last = Math.max(\n        this.#last,\n        this.#elapsed + this.#timer.elapsed,\n      ));\n    }\n  }\n\n  get length() {\n    return this.#steps.length;\n  }\n\n  get progress() {\n    return this.#index;\n  }\n\n  get speed() {\n    return this.#speed;\n  }\n\n  bump() {\n    const head = this.#steps[0];\n    const curr = this.#steps[this.#index];\n    this.#index += 1;\n    this.#elapsed = curr.timeStamp - head.timeStamp;\n    this.#timer = new Timer();\n    this.#speed = computeSpeed(this.#index, this.#elapsed);\n  }\n}\n\nfunction shiftTimeStamps(events: readonly AnyEvent[]) {\n  const result: AnyEvent[] = [];\n  let timeStamp = 0;\n  for (const event of events) {\n    if (result.length === 0) {\n      timeStamp = event.timeStamp;\n    }\n    result.push({ ...event, timeStamp: event.timeStamp - timeStamp });\n  }\n  return result;\n}\n\nfunction splitLines(steps: readonly Step[], limit: number = 50) {\n  const lines: string[] = [];\n  let line = \"\";\n  let ws = false;\n  for (let i = 0; i < steps.length; i++) {\n    const { codePoint } = steps[i];\n    if (codePoint === 0x0020) {\n      line += String.fromCodePoint(codePoint);\n      ws = true;\n    } else {\n      if (ws) {\n        if (line.length >= limit) {\n          lines.push(line);\n          line = \"\";\n        }\n      }\n      line += String.fromCodePoint(codePoint);\n      ws = false;\n    }\n  }\n  if (line.length > 0) {\n    lines.push(line);\n  }\n  return lines;\n}\n","import {\n  type Feedback,\n  splitStyledText,\n  type Step,\n  TextInput,\n} from \"@mkboard/textinput\";\nimport {\n  type AnyEvent,\n  type IInputEvent,\n  type IKeyboardEvent,\n} from \"@mkboard/textinput-events\";\nimport { type TextGenerator } from \"../generators/index.ts\";\nimport { computeProgress } from \"./duration.ts\";\nimport {\n  type Progress,\n  type SessionLine,\n  type SessionLines,\n  type SessionSettings,\n} from \"./types.ts\";\n\nexport class Session {\n  static readonly emptyLines = {\n    text: \"\",\n    lines: [],\n  } satisfies SessionLines;\n  static readonly emptyProgress = {\n    time: 0,\n    length: 0,\n    progress: 0,\n    speed: 0,\n  } satisfies Progress;\n\n  /** A list of events to replay. */\n  #events: AnyEvent[] = [];\n  /** The currently visible lines. */\n  #lines!: SessionLine[];\n  /** The index of the edited line. */\n  #activeLine!: number;\n  /** The text input for the edited line. */\n  #textInput!: TextInput;\n  /** The steps accumulated from all lines. */\n  #steps!: Step[];\n  /** Generates unique React element keys. */\n  #index = 0;\n\n  constructor(\n    readonly settings: SessionSettings,\n    readonly generator: TextGenerator,\n  ) {\n    this.#lines = [];\n    this.#activeLine = 0;\n    this.#steps = [];\n    while (this.#lines.length < this.settings.numLines) {\n      this.#appendLine();\n    }\n    this.#setActiveLine();\n  }\n\n  getEvents(): readonly AnyEvent[] {\n    return this.#events;\n  }\n\n  getLines(): SessionLines {\n    return { text: \"\", lines: this.#lines };\n  }\n\n  getSteps(): readonly Step[] {\n    return this.#steps;\n  }\n\n  handleKeyDown = (event: IKeyboardEvent) => {\n    this.#addEvent(event);\n  };\n\n  handleKeyUp = (event: IKeyboardEvent) => {\n    this.#addEvent(event);\n  };\n\n  handleInput = (\n    event: IInputEvent,\n  ): {\n    feedback: Feedback;\n    progress: Progress;\n    completed: boolean;\n  } => {\n    this.#addEvent(event);\n    const feedback = this.#textInput.onInput(event);\n    const { progress, completed } = computeProgress(\n      this.settings.duration,\n      this.#steps,\n    );\n    this.#updateActiveLine(progress);\n    if (this.#textInput.completed) {\n      if (this.#activeLine < this.#lines.length - 3) {\n        this.#activeLine += 1;\n      } else {\n        this.#lines.shift();\n        this.#appendLine();\n      }\n      this.#setActiveLine();\n    }\n    return { feedback, progress, completed };\n  };\n\n  #addEvent(event: AnyEvent) {\n    this.#events.push(event);\n  }\n\n  #appendLine() {\n    const mark = this.generator.mark();\n    const text = this.#generateLine();\n    const chars = splitStyledText(text);\n    const index = (this.#index += 1);\n    this.#lines.push({\n      mark,\n      index,\n      text,\n      chars,\n      progress: null,\n    });\n  }\n\n  #setActiveLine() {\n    const { text } = this.#lines[this.#activeLine];\n    this.#textInput = new TextInput(text, this.settings.textInput, (step) => {\n      this.#steps.push(step);\n    });\n    this.#updateActiveLine();\n  }\n\n  #updateActiveLine(progress: Progress | null = null) {\n    const { mark, index, text } = this.#lines[this.#activeLine];\n    const { chars } = this.#textInput;\n    this.#lines[this.#activeLine] = {\n      mark,\n      index,\n      text,\n      chars,\n      progress,\n    };\n  }\n\n  #generateLine() {\n    const {\n      settings: { numCols },\n      generator,\n    } = this;\n    let line = \"\";\n    while (true) {\n      const mark = generator.mark();\n      const word = generator.nextWord();\n      if (line.length > 0 && line.length + word.length + 1 > numCols) {\n        generator.reset(mark);\n        break;\n      }\n      line += `${word} `;\n    }\n    return line;\n  }\n}\n","import { Book } from \"@mkboard/content\";\nimport { Language } from \"@mkboard/keyboard\";\nimport {\n  enumProp,\n  itemProp,\n  numberProp,\n  type Settings,\n  useSettings,\n} from \"@mkboard/settings\";\nimport {\n  type TextDisplaySettings,\n  type TextInputSettings,\n  toTextDisplaySettings,\n  toTextInputSettings,\n} from \"@mkboard/textinput\";\nimport { useMemo } from \"react\";\nimport {\n  type Duration,\n  duration_15_seconds,\n  DurationType,\n} from \"./session/index.ts\";\n\nexport enum TextSourceType {\n  CommonWords = 1,\n  PseudoWords = 2,\n  Book = 3,\n}\n\nexport type CommonWordsSource = {\n  readonly type: TextSourceType.CommonWords;\n  readonly language: Language;\n  readonly wordListSize: number;\n};\n\nexport type PseudoWordsSource = {\n  readonly type: TextSourceType.PseudoWords;\n  readonly language: Language;\n};\n\nexport type BookSource = {\n  readonly type: TextSourceType.Book;\n  readonly book: Book;\n  readonly paragraphIndex: number;\n};\n\nexport type TextSource = CommonWordsSource | PseudoWordsSource | BookSource;\n\nexport const typingTestProps = {\n  type: enumProp(\n    \"typingTest.textSource.type\",\n    TextSourceType,\n    TextSourceType.CommonWords,\n  ),\n  language: itemProp(\n    \"typingTest.textSource.language\",\n    Language.ALL,\n    Language.EN,\n  ),\n  wordList: {\n    wordListSize: numberProp(\"typingTest.wordList.wordListSize\", 1000, {\n      min: 10,\n      max: 1000,\n    }),\n  } as const,\n  book: itemProp(\"typingTest.book\", Book.ALL, Book.EN_ALICE_WONDERLAND),\n  bookParagraphIndex: numberProp(\"typingTest.book.paragraphIndex\", 0, {\n    min: 0,\n    max: 1000,\n  }),\n  duration: {\n    type: enumProp(\"typingTest.duration.type\", DurationType, DurationType.Time),\n    value: numberProp(\"typingTest.duration.value\", 0),\n  } as const,\n} as const;\n\nexport function toDuration(settings: Settings): Duration {\n  const type = settings.get(typingTestProps.duration.type);\n  const value = settings.get(typingTestProps.duration.value);\n  if (value === 0) {\n    return duration_15_seconds;\n  } else {\n    return { type, value };\n  }\n}\n\nexport function toTextSource(settings: Settings): TextSource {\n  switch (settings.get(typingTestProps.type)) {\n    case TextSourceType.CommonWords:\n      return {\n        type: TextSourceType.CommonWords,\n        language: settings.get(typingTestProps.language),\n        wordListSize: settings.get(typingTestProps.wordList.wordListSize),\n      };\n    case TextSourceType.PseudoWords:\n      return {\n        type: TextSourceType.PseudoWords,\n        language: settings.get(typingTestProps.language),\n      };\n    case TextSourceType.Book:\n      return {\n        type: TextSourceType.Book,\n        book: settings.get(typingTestProps.book),\n        paragraphIndex: settings.get(typingTestProps.bookParagraphIndex),\n      };\n    default:\n      throw new Error();\n  }\n}\n\nexport type CompositeSettings = {\n  readonly duration: Duration;\n  readonly textSource: TextSource;\n  readonly textInput: TextInputSettings;\n  readonly textDisplay: TextDisplaySettings;\n};\n\nexport function toCompositeSettings(settings: Settings): CompositeSettings {\n  const duration = toDuration(settings);\n  const textSource = toTextSource(settings);\n  const textInput = toTextInputSettings(settings);\n  const textDisplay = {\n    ...toTextDisplaySettings(settings),\n    language: languageOf(textSource),\n  };\n  return {\n    duration,\n    textSource,\n    textInput,\n    textDisplay,\n  };\n}\n\nexport function useCompositeSettings(): CompositeSettings {\n  const { settings } = useSettings();\n  return useMemo(() => toCompositeSettings(settings), [settings]);\n}\n\nfunction languageOf(textSource: TextSource): Language {\n  switch (textSource.type) {\n    case TextSourceType.CommonWords:\n      return textSource.language;\n    case TextSourceType.PseudoWords:\n      return textSource.language;\n    case TextSourceType.Book:\n      return textSource.book.language;\n  }\n}\n","export class AnimationFrames {\n  #id = 0;\n  #started = 0;\n\n  start(callback: (elapsed: DOMHighResTimeStamp) => void | boolean) {\n    this.cancel();\n    this.#started = 0;\n    const step = (time: DOMHighResTimeStamp) => {\n      if (this.#started === 0) {\n        this.#started = time;\n      }\n      if (callback(time - this.#started) !== false) {\n        this.#id = requestAnimationFrame(step);\n      }\n    };\n    this.#id = requestAnimationFrame(step);\n  }\n\n  cancel() {\n    if (this.#id) {\n      cancelAnimationFrame(this.#id);\n    }\n    this.#id = 0;\n  }\n}\n","import { useIntlNumbers } from \"@mkboard/intl\";\nimport { useFormatter } from \"@mkboard/lesson-ui\";\nimport {\n  AnimationFrames,\n  formatDuration,\n  NameValue,\n  Para,\n} from \"@mkboard/widget\";\nimport { useEffect, useState } from \"react\";\nimport { type ReplayState } from \"../session/index.ts\";\n\nexport function ReplayProgress({ stepper }: { stepper: ReplayState }) {\n  const { formatInteger } = useIntlNumbers();\n  const { formatSpeed } = useFormatter();\n  const {\n    progress: { progress, length, speed },\n    time,\n  } = useReplayProgress(stepper);\n  return (\n    <Para align=\"center\">\n      <NameValue\n        name=\"Progress\"\n        value={`${formatInteger(progress)}/${formatInteger(length)}`}\n      />\n      <NameValue\n        name=\"Time\"\n        value={formatDuration(time, { showMillis: true })}\n      />\n      <NameValue name=\"Speed\" value={formatSpeed(speed)} />\n    </Para>\n  );\n}\n\nfunction useReplayProgress(stepper: ReplayState) {\n  const { state, progress } = stepper;\n  const [time, setTime] = useState(0);\n  useEffect(() => {\n    setTime(0);\n    const frames = new AnimationFrames();\n    frames.start(() => {\n      if (state === \"running\" || state === \"finished\") {\n        setTime(progress.time);\n      }\n    });\n    return () => {\n      frames.cancel();\n    };\n  }, [state, progress]);\n  return { progress, time };\n}\n","import { type KeyId, useKeyboard } from \"@mkboard/keyboard\";\nimport { KeyLayer, VirtualKeyboard } from \"@mkboard/keyboard-ui\";\nimport { Tasks } from \"@mkboard/lang\";\nimport {\n  type LineList,\n  type Step,\n  type TextInputSettings,\n} from \"@mkboard/textinput\";\nimport { type AnyEvent } from \"@mkboard/textinput-events\";\nimport { StaticText } from \"@mkboard/textinput-ui\";\nimport { Box, useDocumentVisibility } from \"@mkboard/widget\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { ReplayState, Session, type TestResult } from \"../session/index.ts\";\nimport { useCompositeSettings } from \"../settings.ts\";\nimport * as styles from \"./Replay.module.less\";\nimport { ReplayProgress } from \"./ReplayProgress.tsx\";\n\nexport function Replay({ result: { steps, events } }: { result: TestResult }) {\n  const keyboard = useKeyboard();\n  const { textInput, textDisplay } = useCompositeSettings();\n  const { stepper, lines, depressedKeys } = useReplayState(\n    textInput,\n    steps,\n    events,\n  );\n  return (\n    <div className={styles.root}>\n      <ReplayProgress stepper={stepper} />\n      <Box className={styles.text} alignItems=\"center\" justifyContent=\"center\">\n        <StaticText settings={textDisplay} lines={lines} cursor={true} />\n      </Box>\n      <VirtualKeyboard keyboard={keyboard} height=\"16rem\">\n        <KeyLayer depressedKeys={depressedKeys} />\n      </VirtualKeyboard>\n    </div>\n  );\n}\n\nfunction useReplayState(\n  settings: TextInputSettings,\n  steps: readonly Step[],\n  events: readonly AnyEvent[],\n) {\n  const stepper = useMemo(\n    () => new ReplayState(settings, steps, events),\n    [settings, steps, events],\n  );\n  const visible = useDocumentVisibility();\n  const [lines, setLines] = useState<LineList>(Session.emptyLines);\n  const [depressedKeys, setDepressedKeys] = useState<KeyId[]>([]);\n  useEffect(() => {\n    const tasks = new Tasks();\n    const step = () => {\n      stepper.step();\n      setLines(stepper.lines);\n      setDepressedKeys(stepper.depressedKeys);\n      tasks.delayed(stepper.delay, step);\n    };\n    if (visible) {\n      stepper.reset();\n      setLines(stepper.lines);\n      setDepressedKeys(stepper.depressedKeys);\n      tasks.delayed(stepper.delay, step);\n    }\n    return () => {\n      tasks.cancelAll();\n    };\n  }, [stepper, visible]);\n  return { stepper, lines, depressedKeys };\n}\n","// extracted by mini-css-extract-plugin\nvar _1 = \"DFiMaSObFb\";\nvar _2 = \"Q6yVe564ZQ\";\nexport { _1 as \"root\", _2 as \"text\" }\n","import {\n  AccuracyHistogram,\n  makeAccuracyDistribution,\n  makeSpeedDistribution,\n  RollingSpeedChart,\n  SpeedHistogram,\n  TimeToTypeHistogram,\n} from \"@mkboard/chart\";\nimport { useIntlNumbers } from \"@mkboard/intl\";\nimport { useFormatter } from \"@mkboard/lesson-ui\";\nimport { Screen } from \"@mkboard/pages-shared\";\nimport {\n  Box,\n  Button,\n  Field,\n  FieldList,\n  formatDuration,\n  Icon,\n  Kbd,\n  Name,\n  NameValue,\n  Para,\n  Spacer,\n  useHotkeys,\n  useView,\n  Value,\n} from \"@mkboard/widget\";\nimport { mdiSkipNext } from \"@mdi/js\";\nimport { type ReactNode } from \"react\";\nimport { type TestResult } from \"../session/index.ts\";\nimport { views } from \"../views.tsx\";\nimport { Replay } from \"./Replay.tsx\";\nimport * as styles from \"./ReportScreen.module.less\";\n\nexport function ReportScreen({ result }: { result: TestResult }) {\n  const { setView } = useView(views);\n  const { formatNumber, formatPercents } = useIntlNumbers();\n  const { speedUnit, formatSpeed } = useFormatter();\n\n  const handleNext = () => setView(\"test\");\n\n  useHotkeys({\n    [\"Enter\"]: handleNext,\n  });\n\n  const { time, speed, length, errors, accuracy } = result.stats;\n\n  const dSpeed = makeSpeedDistribution();\n  const dAccuracy = makeAccuracyDistribution();\n  const pSpeed = dSpeed.cdf(speed);\n  const pAccuracy = dAccuracy.cdf(dAccuracy.scale(accuracy));\n\n  return (\n    <Screen>\n      <Box alignItems=\"center\" justifyContent=\"center\">\n        <Indicator\n          name=\"Speed\"\n          value={\n            <Metric\n              value={formatSpeed(speed, { unit: false })}\n              unit={speedUnit.id}\n            />\n          }\n        />\n        <Separator />\n        <Indicator\n          name=\"Accuracy\"\n          value={\n            <Metric value={`${formatNumber(accuracy * 100, 2)}`} unit=\"%\" />\n          }\n        />\n      </Box>\n\n      <Para align=\"center\">\n        <NameValue name=\"Characters\" value={formatNumber(length)} />\n        <NameValue name=\"Errors\" value={formatNumber(errors)} />\n        <NameValue\n          name=\"Time\"\n          value={formatDuration(time, { showMillis: true })}\n        />\n      </Para>\n\n      <Box alignItems=\"center\" justifyContent=\"center\">\n        <SpeedHistogram\n          distribution={dSpeed}\n          thresholds={[{ label: \"Speed\", value: speed }]}\n          width=\"45rem\"\n          height=\"15rem\"\n        />\n      </Box>\n\n      <Para align=\"center\">\n        <Name>\n          Faster than <Value value={formatPercents(pSpeed)} /> of all other\n          people.\n        </Name>{\" \"}\n        <Name>\n          You are in the top <Value value={formatPercents(top(pSpeed))} />.\n        </Name>\n      </Para>\n\n      <Box alignItems=\"center\" justifyContent=\"center\">\n        <AccuracyHistogram\n          distribution={dAccuracy}\n          thresholds={[{ label: \"Accuracy\", value: accuracy }]}\n          width=\"45rem\"\n          height=\"15rem\"\n        />\n      </Box>\n\n      <Para align=\"center\">\n        <Name>\n          More accurate than <Value value={formatPercents(pAccuracy)} /> of all\n          other people.\n        </Name>{\" \"}\n        <Name>\n          You are in the top <Value value={formatPercents(top(pAccuracy))} />.\n        </Name>\n      </Para>\n\n      <Box alignItems=\"center\" justifyContent=\"center\">\n        <TimeToTypeHistogram\n          steps={result.steps}\n          width=\"45rem\"\n          height=\"15rem\"\n        />\n      </Box>\n\n      <Para align=\"center\">Time to type a character histogram.</Para>\n\n      <Box alignItems=\"center\" justifyContent=\"center\">\n        <RollingSpeedChart\n          stats={result.stats}\n          steps={result.steps}\n          width=\"45rem\"\n          height=\"15rem\"\n        />\n      </Box>\n\n      <Para align=\"center\">Typing speed change over time chart.</Para>\n\n      <Spacer size={3} />\n\n      <Replay result={result} />\n\n      <Spacer size={3} />\n\n      <FieldList>\n        <Field.Filler />\n        <Field>\n          <Button\n            label=\"Next test\"\n            icon={<Icon shape={mdiSkipNext} />}\n            onClick={handleNext}\n          />\n        </Field>\n        <Field.Filler />\n      </FieldList>\n\n      <Para align=\"center\">\n        Press <Kbd>Enter</Kbd> to start a new test.\n      </Para>\n    </Screen>\n  );\n}\n\nfunction Indicator({ name, value }: { name: ReactNode; value: ReactNode }) {\n  return (\n    <div className={styles.indicator}>\n      <div className={styles.indicatorValue}>\n        <Value>{value}</Value>\n      </div>\n      <div className={styles.indicatorName}>\n        <Name>{name}</Name>\n      </div>\n    </div>\n  );\n}\n\nfunction Metric({ value, unit }: { value: ReactNode; unit: ReactNode }) {\n  return (\n    <>\n      <span className={styles.valueLabel}>{value}</span>\n      <span className={styles.unitLabel}>{unit}</span>\n    </>\n  );\n}\n\nfunction Separator() {\n  return <div className={styles.separator} />;\n}\n\nfunction top(value: number) {\n  return Math.max(0, 1 - value); // Takes care of negative zero.\n}\n","// extracted by mini-css-extract-plugin\nvar _1 = \"zMm2Qt4CJ_\";\nvar _2 = \"HmlU2uOlUt\";\nvar _3 = \"BsUqtZMQxo\";\nvar _4 = \"W61bRKQyv9\";\nvar _5 = \"CPbZuJqaNO\";\nvar _6 = \"a5K98u4jos\";\nexport { _1 as \"indicator\", _2 as \"indicatorName\", _3 as \"indicatorValue\", _4 as \"separator\", _5 as \"unitLabel\", _6 as \"valueLabel\" }\n","import {\n  type BookContent,\n  BookPreview,\n  BookSelector,\n  flattenContent,\n  ParagraphPreview,\n  ParagraphSelector,\n} from \"@mkboard/content\";\nimport { BookContentLoader } from \"@mkboard/content-books\";\nimport { useSettings } from \"@mkboard/settings\";\nimport { FieldSet, Para } from \"@mkboard/widget\";\nimport { useMemo } from \"react\";\nimport { typingTestProps } from \"../../../settings.ts\";\n\nexport function BookSettings() {\n  const { settings } = useSettings();\n  return (\n    <BookContentLoader book={settings.get(typingTestProps.book)}>\n      {(bookContent) => <Content bookContent={bookContent} />}\n    </BookContentLoader>\n  );\n}\n\nfunction Content({ bookContent }: { bookContent: BookContent }) {\n  const { settings, updateSettings } = useSettings();\n  const paragraphs = useMemo(\n    () => flattenContent(bookContent.content),\n    [bookContent],\n  );\n  const book = settings.get(typingTestProps.book);\n  const paragraphIndex = settings.get(typingTestProps.bookParagraphIndex);\n  return (\n    <FieldSet legend=\"Book paragraphs\">\n      <Para>Type the content of a book.</Para>\n\n      <BookSelector\n        book={book}\n        onChange={(book) => {\n          updateSettings(\n            settings\n              .set(typingTestProps.book, book)\n              .set(typingTestProps.bookParagraphIndex, 0),\n          );\n        }}\n      />\n\n      <BookPreview {...bookContent} />\n\n      <ParagraphSelector\n        paragraphs={paragraphs}\n        paragraphIndex={paragraphIndex}\n        onChange={(paragraphIndex) => {\n          updateSettings(\n            settings.set(typingTestProps.bookParagraphIndex, paragraphIndex),\n          );\n        }}\n      />\n\n      <ParagraphPreview\n        paragraphs={paragraphs}\n        paragraphIndex={paragraphIndex}\n      />\n    </FieldSet>\n  );\n}\n","import { type WordList, wordListStats } from \"@mkboard/content\";\nimport { WordListLoader } from \"@mkboard/content-words\";\nimport { useIntlDisplayNames, useIntlNumbers } from \"@mkboard/intl\";\nimport { Language } from \"@mkboard/keyboard\";\nimport { useSettings } from \"@mkboard/settings\";\nimport {\n  Field,\n  FieldList,\n  FieldSet,\n  NameValue,\n  OptionList,\n  Para,\n  Range,\n  TextField,\n} from \"@mkboard/widget\";\nimport { useIntl } from \"react-intl\";\nimport { typingTestProps } from \"../../../settings.ts\";\n\nexport function CommonWordsSettings() {\n  const { settings } = useSettings();\n  return (\n    <WordListLoader language={settings.get(typingTestProps.language)}>\n      {(wordList) => (\n        <Content\n          wordList={wordList.slice(\n            0,\n            settings.get(typingTestProps.wordList.wordListSize),\n          )}\n        />\n      )}\n    </WordListLoader>\n  );\n}\n\nfunction Content({ wordList }: { wordList: WordList }) {\n  const { settings, updateSettings } = useSettings();\n  const { formatMessage } = useIntl();\n  const { formatLanguageName } = useIntlDisplayNames();\n  const { formatNumber } = useIntlNumbers();\n  const { wordCount, avgWordLength } = wordListStats(wordList);\n  return (\n    <FieldSet legend=\"Common words\">\n      <Para>Type the common words.</Para>\n\n      <FieldList>\n        <Field>\n          {formatMessage({\n            id: \"t_Language:\",\n            defaultMessage: \"Language:\",\n          })}\n        </Field>\n\n        <Field>\n          <OptionList\n            options={Language.ALL.map((item) => ({\n              value: item.id,\n              name: formatLanguageName(item.id),\n            }))}\n            value={String(settings.get(typingTestProps.language))}\n            onSelect={(id) => {\n              updateSettings(\n                settings.set(typingTestProps.language, Language.ALL.get(id)),\n              );\n            }}\n          />\n        </Field>\n      </FieldList>\n\n      <FieldList>\n        <Field>\n          {formatMessage({\n            id: \"t_Word_list_size:\",\n            defaultMessage: \"Word list size:\",\n          })}\n        </Field>\n        <Field>\n          <Range\n            size={16}\n            min={typingTestProps.wordList.wordListSize.min}\n            max={typingTestProps.wordList.wordListSize.max}\n            step={1}\n            value={settings.get(typingTestProps.wordList.wordListSize)}\n            onChange={(value) => {\n              updateSettings(\n                settings.set(typingTestProps.wordList.wordListSize, value),\n              );\n            }}\n          />\n        </Field>\n      </FieldList>\n\n      <Para>\n        <TextField\n          type=\"textarea\"\n          value={wordList.join(\", \")}\n          readOnly={true}\n        />\n      </Para>\n\n      <FieldList>\n        <Field>\n          <NameValue\n            name={formatMessage({\n              id: \"t_num_Unique_words\",\n              defaultMessage: \"Unique words\",\n            })}\n            value={formatNumber(wordCount)}\n          />\n        </Field>\n        <Field>\n          <NameValue\n            name={formatMessage({\n              id: \"t_Average_word_length\",\n              defaultMessage: \"Average word length\",\n            })}\n            value={formatNumber(avgWordLength, 2)}\n          />\n        </Field>\n      </FieldList>\n    </FieldSet>\n  );\n}\n","import { useIntlDisplayNames } from \"@mkboard/intl\";\nimport { Language } from \"@mkboard/keyboard\";\nimport { Alphabet, Filter, type PhoneticModel } from \"@mkboard/phonetic-model\";\nimport { PhoneticModelLoader } from \"@mkboard/phonetic-model-loader\";\nimport { useSettings } from \"@mkboard/settings\";\nimport { Field, FieldList, FieldSet, OptionList, Para } from \"@mkboard/widget\";\nimport { useIntl } from \"react-intl\";\nimport { typingTestProps } from \"../../../settings.ts\";\n\nexport function PseudoWordsSettings() {\n  const { settings } = useSettings();\n  return (\n    <PhoneticModelLoader language={settings.get(typingTestProps.language)}>\n      {(model) => <Content model={model} />}\n    </PhoneticModelLoader>\n  );\n}\n\nfunction Content({ model }: { model: PhoneticModel }) {\n  const { settings, updateSettings } = useSettings();\n  const { formatMessage } = useIntl();\n  const { formatLanguageName } = useIntlDisplayNames();\n  const words = [];\n  for (let i = 0; i < 50; i++) {\n    words.push(model.nextWord(Filter.empty));\n  }\n  return (\n    <FieldSet legend=\"Pseudo words\">\n      <Para>\n        Type pseudo words generated by an algorithm according to the phonetic\n        rules of your language.\n      </Para>\n\n      <FieldList>\n        <Field>\n          {formatMessage({\n            id: \"t_Language:\",\n            defaultMessage: \"Language:\",\n          })}\n        </Field>\n\n        <Field>\n          <OptionList\n            options={Language.ALL.map((item) => ({\n              value: item.id,\n              name: formatLanguageName(item.id),\n            }))}\n            value={String(settings.get(typingTestProps.language))}\n            onSelect={(id) => {\n              updateSettings(\n                settings.set(typingTestProps.language, Language.ALL.get(id)),\n              );\n            }}\n          />\n        </Field>\n      </FieldList>\n\n      <FieldList>\n        <Field>Alphabet:</Field>\n        <Field>\n          <Alphabet model={model} />\n        </Field>\n      </FieldList>\n\n      <FieldList>\n        <Field>Example:</Field>\n        <Field>\n          <em>{words.join(\" \")}</em>\n        </Field>\n      </FieldList>\n    </FieldSet>\n  );\n}\n","import { useSettings } from \"@mkboard/settings\";\nimport { Field, FieldList, FieldSet, Para, RadioBox } from \"@mkboard/widget\";\nimport { TextSourceType, typingTestProps } from \"../../settings.ts\";\nimport { BookSettings } from \"./text/BookSettings.tsx\";\nimport { CommonWordsSettings } from \"./text/CommonWordsSettings.tsx\";\nimport { PseudoWordsSettings } from \"./text/PseudoWordsSettings.tsx\";\n\nexport function TextGeneratorSettings() {\n  const { settings, updateSettings } = useSettings();\n  return (\n    <>\n      <FieldSet legend=\"Text Settings\">\n        <Para>Choose what text to type in the test.</Para>\n\n        <FieldList>\n          <Field>\n            <RadioBox\n              label=\"Common words\"\n              name=\"text-source\"\n              value=\"text-source-common-words\"\n              checked={\n                settings.get(typingTestProps.type) ===\n                TextSourceType.CommonWords\n              }\n              onSelect={() => {\n                updateSettings(\n                  settings.set(\n                    typingTestProps.type,\n                    TextSourceType.CommonWords,\n                  ),\n                );\n              }}\n            />\n          </Field>\n          <Field>\n            <RadioBox\n              label=\"Pseudo words\"\n              name=\"text-source\"\n              value=\"text-source-pseudo-words\"\n              checked={\n                settings.get(typingTestProps.type) ===\n                TextSourceType.PseudoWords\n              }\n              onSelect={() => {\n                updateSettings(\n                  settings.set(\n                    typingTestProps.type,\n                    TextSourceType.PseudoWords,\n                  ),\n                );\n              }}\n            />\n          </Field>\n          <Field>\n            <RadioBox\n              label=\"Book paragraphs\"\n              name=\"text-source\"\n              value=\"text-source-book\"\n              checked={\n                settings.get(typingTestProps.type) === TextSourceType.Book\n              }\n              onSelect={() => {\n                updateSettings(\n                  settings.set(typingTestProps.type, TextSourceType.Book),\n                );\n              }}\n            />\n          </Field>\n        </FieldList>\n      </FieldSet>\n\n      {settings.get(typingTestProps.type) === TextSourceType.CommonWords && (\n        <CommonWordsSettings />\n      )}\n      {settings.get(typingTestProps.type) === TextSourceType.PseudoWords && (\n        <PseudoWordsSettings />\n      )}\n      {settings.get(typingTestProps.type) === TextSourceType.Book && (\n        <BookSettings />\n      )}\n    </>\n  );\n}\n","import {\n  type BookContent,\n  flattenContent,\n  splitParagraph,\n} from \"@mkboard/content\";\nimport { clamp } from \"@mkboard/lang\";\nimport { type TextGenerator } from \"./types.ts\";\n\ntype BookSettings = {\n  readonly paragraphIndex: number;\n};\n\ntype Mark = {\n  readonly paragraphIndex: number;\n  readonly wordIndex: number;\n};\n\nexport class BookParagraphsGenerator implements TextGenerator<Mark> {\n  readonly #paragraphs: readonly string[];\n  #paragraphIndex: number;\n  #words: readonly string[] = [];\n  #wordIndex: number = 0;\n\n  constructor(settings: BookSettings, { content }: BookContent) {\n    const paragraphs = flattenContent(content);\n    const paragraphIndex = clamp(settings.paragraphIndex, 0, paragraphs.length);\n    this.#paragraphs = paragraphs;\n    this.#paragraphIndex = paragraphIndex;\n    this.#words = splitParagraph(paragraphs[paragraphIndex]);\n    this.#wordIndex = 0;\n  }\n\n  mark(): Mark {\n    return {\n      paragraphIndex: this.#paragraphIndex,\n      wordIndex: this.#wordIndex,\n    };\n  }\n\n  reset({ paragraphIndex, wordIndex }: Mark): void {\n    this.#paragraphIndex = paragraphIndex;\n    this.#words = splitParagraph(this.#paragraphs[this.#paragraphIndex]);\n    this.#wordIndex = wordIndex;\n  }\n\n  nextWord(): string {\n    if (this.#wordIndex >= this.#words.length) {\n      this.#paragraphIndex += 1;\n      if (this.#paragraphIndex >= this.#paragraphs.length) {\n        this.#paragraphIndex = 0;\n      }\n      this.#words = splitParagraph(this.#paragraphs[this.#paragraphIndex]);\n      this.#wordIndex = 0;\n    }\n    const word = this.#words[this.#wordIndex];\n    this.#wordIndex += 1;\n    return word;\n  }\n}\n","import { Filter, type PhoneticModel } from \"@mkboard/phonetic-model\";\nimport { LCG, type RNGStream } from \"@mkboard/rand\";\nimport { type TextGenerator } from \"./types.ts\";\n\ntype Mark = {\n  readonly mark: unknown;\n};\n\nexport class PseudoWordsGenerator implements TextGenerator<Mark> {\n  readonly #model: PhoneticModel;\n  readonly #rng: RNGStream;\n\n  constructor(model: PhoneticModel, rng: RNGStream = LCG(1)) {\n    this.#model = model;\n    this.#rng = rng;\n  }\n\n  nextWord(): string {\n    return this.#model.nextWord(Filter.empty, this.#rng);\n  }\n\n  mark(): Mark {\n    return { mark: this.#rng.mark() };\n  }\n\n  reset({ mark }: Mark): void {\n    this.#rng.reset(mark);\n  }\n}\n","import { type WordList } from \"@mkboard/content\";\nimport { LCG, randomSample, type RNGStream } from \"@mkboard/rand\";\nimport { type TextGenerator } from \"./types.ts\";\n\ntype CommonWordsSettings = {\n  readonly wordListSize: number;\n};\n\ntype Mark = {\n  readonly mark: unknown;\n};\n\nexport class CommonWordsGenerator implements TextGenerator<Mark> {\n  readonly #wordList: WordList;\n  readonly #rng: RNGStream;\n\n  constructor(\n    { wordListSize }: CommonWordsSettings,\n    wordList: WordList,\n    rng: RNGStream = LCG(1),\n  ) {\n    this.#wordList = [...wordList].splice(0, wordListSize);\n    this.#rng = rng;\n  }\n\n  nextWord(): string {\n    return randomSample(this.#wordList, this.#rng);\n  }\n\n  mark(): Mark {\n    return { mark: this.#rng.mark() };\n  }\n\n  reset({ mark }: Mark): void {\n    this.#rng.reset(mark);\n  }\n}\n","import { BookContentLoader } from \"@mkboard/content-books\";\nimport { WordListLoader } from \"@mkboard/content-words\";\nimport { PhoneticModelLoader } from \"@mkboard/phonetic-model-loader\";\nimport { LCG } from \"@mkboard/rand\";\nimport { type ReactNode } from \"react\";\nimport { TextSourceType, useCompositeSettings } from \"../settings.ts\";\nimport { BookParagraphsGenerator } from \"./book.ts\";\nimport { CommonWordsGenerator } from \"./commonwords.ts\";\nimport { PseudoWordsGenerator } from \"./pseudowords.ts\";\nimport { type TextGenerator } from \"./types.ts\";\n\nexport function TextGeneratorLoader({\n  children,\n}: {\n  children: (generator: TextGenerator) => ReactNode;\n}) {\n  const { textSource } = useCompositeSettings();\n  switch (textSource.type) {\n    case TextSourceType.CommonWords:\n      return (\n        <WordListLoader language={textSource.language}>\n          {(wordList) =>\n            children(new CommonWordsGenerator(textSource, wordList, rng()))\n          }\n        </WordListLoader>\n      );\n    case TextSourceType.PseudoWords:\n      return (\n        <PhoneticModelLoader language={textSource.language}>\n          {(model) => children(new PseudoWordsGenerator(model, rng()))}\n        </PhoneticModelLoader>\n      );\n    case TextSourceType.Book:\n      return (\n        <BookContentLoader book={textSource.book}>\n          {(bookContent) =>\n            children(new BookParagraphsGenerator(textSource, bookContent))\n          }\n        </BookContentLoader>\n      );\n  }\n}\n\nfunction rng() {\n  return LCG(Date.now());\n}\n","import { memo, type ReactNode } from \"react\";\nimport { type SessionLine } from \"../session/index.ts\";\nimport * as styles from \"./LineTemplate.module.less\";\n\nexport const LineTemplate = memo(function LineTemplate({\n  children,\n  progress,\n}: {\n  children: ReactNode;\n} & SessionLine) {\n  return <div className={styles.root}>{children}</div>;\n});\n","// extracted by mini-css-extract-plugin\nvar _1 = \"CWIK3zCJlj\";\nexport { _1 as \"root\" }\n","import { useIntlNumbers } from \"@mkboard/intl\";\nimport { useFormatter } from \"@mkboard/lesson-ui\";\nimport { formatDuration, Value, withDeferred } from \"@mkboard/widget\";\nimport { memo } from \"react\";\nimport { type Progress } from \"../session/index.ts\";\nimport * as styles from \"./TestProgress.module.less\";\n\nexport const TestProgress0 = memo(function TestProgress({\n  progress: { length, time, progress, speed },\n}: {\n  progress: Progress;\n}) {\n  const { formatInteger, formatPercents } = useIntlNumbers();\n  const { formatSpeed } = useFormatter();\n  return (\n    <div className={styles.root}>\n      <div\n        className={styles.bar}\n        style={{ inlineSize: `${progress * 100}%` }}\n      />\n      <div className={styles.info}>\n        <Value value={formatDuration(time, { showMillis: true })} />\n        {\" / \"}\n        <Value value={formatInteger(length)} />\n        {\" / \"}\n        <Value\n          value={formatPercents(progress, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n          })}\n        />\n        {\" / \"}\n        <Value value={formatSpeed(speed)} />\n      </div>\n    </div>\n  );\n});\n\nexport const TestProgress = withDeferred(TestProgress0);\n","// extracted by mini-css-extract-plugin\nvar _1 = \"BEWioHbUt9\";\nvar _2 = \"_7frZdMv8m\";\nvar _3 = \"BEng8tEQdI\";\nexport { _1 as \"bar\", _2 as \"info\", _3 as \"root\" }\n","// extracted by mini-css-extract-plugin\nvar _1 = \"uzg6Z_e1yp\";\nexport { _1 as \"text\" }\n","import { useSettings } from \"@mkboard/settings\";\nimport { Field, FieldList, Icon, IconButton, LinkButton } from \"@mkboard/widget\";\nimport { mdiCog } from \"@mdi/js\";\nimport { clsx } from \"clsx\";\nimport { memo, type ReactNode } from \"react\";\nimport { durations } from \"../session/index.ts\";\nimport { toCompositeSettings, typingTestProps } from \"../settings.ts\";\nimport * as styles from \"./Toolbar.module.less\";\n\nexport const Toolbar = memo(function Toolbar({\n  onChange,\n  onConfigure,\n}: {\n  onChange: () => void;\n  onConfigure: () => void;\n}) {\n  return (\n    <FieldList>\n      <Field.Filler />\n      <Field>\n        <DurationSwitcher onChange={onChange} />\n      </Field>\n      <Field>\n        <IconButton icon={<Icon shape={mdiCog} />} onClick={onConfigure} />\n      </Field>\n      <Field.Filler />\n    </FieldList>\n  );\n});\n\nexport const DurationSwitcher = memo(function DurationSwitcher({\n  onChange,\n}: {\n  onChange: () => void;\n}) {\n  const { settings, updateSettings } = useSettings();\n  const compositeSettings = toCompositeSettings(settings);\n  const children: ReactNode[] = [];\n  for (let index = 0; index < durations.length; index++) {\n    const { duration, label } = durations[index];\n    if (index > 0) {\n      children.push(<span key={children.length}>{\" | \"}</span>);\n    }\n    children.push(\n      <LinkButton\n        key={children.length}\n        className={clsx(\n          styles.item,\n          duration.type === compositeSettings.duration.type &&\n            duration.value === compositeSettings.duration.value &&\n            styles.item_active,\n        )}\n        onClick={() => {\n          updateSettings(\n            settings\n              .set(typingTestProps.duration.type, duration.type)\n              .set(typingTestProps.duration.value, duration.value),\n          );\n          onChange();\n        }}\n      >\n        {label}\n      </LinkButton>,\n    );\n  }\n  return <>{children}</>;\n});\n","// extracted by mini-css-extract-plugin\nvar _1 = \"Ttt4IkpHzR\";\nvar _2 = \"f25EDsyiCy\";\nexport { _1 as \"item\", _2 as \"item_active\" }\n","import { Screen } from \"@mkboard/pages-shared\";\nimport { type LineList, makeStats } from \"@mkboard/textinput\";\nimport { useSoundPlayer } from \"@mkboard/textinput-sounds\";\nimport { TextArea } from \"@mkboard/textinput-ui\";\nimport { Box, type Focusable, Spacer, useView } from \"@mkboard/widget\";\nimport { useEffect, useRef, useState } from \"react\";\nimport {\n  type TextGenerator,\n  TextGeneratorLoader,\n} from \"../generators/index.ts\";\nimport { Session, type TestResult } from \"../session/index.ts\";\nimport { type CompositeSettings, useCompositeSettings } from \"../settings.ts\";\nimport { views } from \"../views.tsx\";\nimport { LineTemplate } from \"./LineTemplate.tsx\";\nimport { TestProgress } from \"./TestProgress.tsx\";\nimport * as styles from \"./TestScreen.module.less\";\nimport { Toolbar } from \"./Toolbar.tsx\";\n\nexport function TestScreen() {\n  return (\n    <TextGeneratorLoader>\n      {(generator) => (\n        <Controller generator={generator} mark={generator.mark()} />\n      )}\n    </TextGeneratorLoader>\n  );\n}\n\nfunction Controller({\n  generator,\n  mark,\n}: {\n  generator: TextGenerator;\n  mark: unknown;\n}) {\n  const { setView } = useView(views);\n  const settings = useCompositeSettings();\n  const focusRef = useRef<Focusable>(null);\n  const player = useSoundPlayer();\n  const [session, setSession] = useState(() => nextTest(settings, generator));\n  const [lines, setLines] = useState<LineList>(Session.emptyLines);\n  const [progress, setProgress] = useState(Session.emptyProgress);\n  useEffect(() => {\n    generator.reset(mark);\n    const session = nextTest(settings, generator);\n    setSession(session);\n    setLines(session.getLines());\n  }, [settings, generator, mark]);\n  return (\n    <Screen>\n      <Toolbar\n        onConfigure={() => {\n          setView(\"settings\");\n        }}\n        onChange={() => {\n          focusRef.current?.focus();\n        }}\n      />\n      <Spacer size={10} />\n      <Box alignItems=\"center\" justifyContent=\"center\">\n        <div className={styles.text}>\n          <TextArea\n            focusRef={focusRef}\n            settings={settings.textDisplay}\n            lines={lines}\n            wrap={false}\n            onFocus={() => {\n              generator.reset(mark);\n              const session = nextTest(settings, generator);\n              setSession(session);\n              setLines(session.getLines());\n            }}\n            onKeyDown={session.handleKeyDown}\n            onKeyUp={session.handleKeyUp}\n            onInput={(event) => {\n              const { feedback, progress, completed } =\n                session.handleInput(event);\n              setLines(session.getLines());\n              setProgress(progress);\n              player(feedback);\n              if (completed) {\n                setView(\"report\", { result: makeResult(session) });\n              }\n            }}\n            lineTemplate={LineTemplate}\n          />\n          <TestProgress progress={progress} />\n        </div>\n      </Box>\n    </Screen>\n  );\n}\n\nfunction nextTest(settings: CompositeSettings, generator: TextGenerator) {\n  return new Session({ ...settings, numLines: 5, numCols: 55 }, generator);\n}\n\nfunction makeResult(session: Session): TestResult {\n  const steps = session.getSteps();\n  const events = session.getEvents();\n  return {\n    stats: makeStats(steps),\n    steps,\n    events,\n  };\n}\n","import { ReportScreen } from \"./components/ReportScreen.tsx\";\nimport { SettingsScreen } from \"./components/SettingsScreen.tsx\";\nimport { TestScreen } from \"./components/TestScreen.tsx\";\n\nexport const views = {\n  test: TestScreen,\n  report: ReportScreen,\n  settings: SettingsScreen,\n} as const;\n","import { Screen } from \"@mkboard/pages-shared\";\nimport { TypingSettings } from \"@mkboard/textinput-ui\";\nimport {\n  Button,\n  ExplainerBoundary,\n  Field,\n  FieldList,\n  Icon,\n  Tab,\n  TabList,\n  useView,\n} from \"@mkboard/widget\";\nimport { mdiCheckCircle } from \"@mdi/js\";\nimport { useState } from \"react\";\nimport { views } from \"../views.tsx\";\nimport { TextGeneratorSettings } from \"./settings/TextGeneratorSettings.tsx\";\n\nexport function SettingsScreen() {\n  const { setView } = useView(views);\n  const [tabIndex, setTabIndex] = useState(0);\n\n  return (\n    <Screen>\n      <ExplainerBoundary defaultVisible={false}>\n        <TabList\n          selectedIndex={tabIndex}\n          onSelect={(tabIndex) => {\n            setTabIndex(tabIndex);\n          }}\n        >\n          <Tab label=\"Text\">\n            <TextGeneratorSettings />\n          </Tab>\n\n          <Tab label=\"Typing\">\n            <TypingSettings />\n          </Tab>\n        </TabList>\n\n        <FieldList>\n          <Field.Filler />\n          <Field>\n            <Button\n              icon={<Icon shape={mdiCheckCircle} />}\n              label=\"Done\"\n              onClick={() => {\n                setView(\"test\");\n              }}\n            />\n          </Field>\n        </FieldList>\n      </ExplainerBoundary>\n    </Screen>\n  );\n}\n","import { ViewSwitch } from \"@mkboard/widget\";\nimport { views } from \"./views.tsx\";\n\nexport function TypingTestPage() {\n  return <ViewSwitch views={views} />;\n}\n","import { KeyboardProvider } from \"@mkboard/keyboard\";\nimport { TypingTestPage } from \"@mkboard/page-typing-test\";\n\nexport default function Page() {\n  return (\n    <KeyboardProvider>\n      <TypingTestPage />\n    </KeyboardProvider>\n  );\n}\n"],"names":["Kbd","props","as","Component","id","title","className","children","clsx","isDocumentVisible","document","visibilityState","DurationType","timeDuration","time","type","Time","value","lengthDuration","length","Length","duration_15_seconds","duration_30_seconds","duration_60_seconds","duration_100_chars","duration_500_chars","duration_1000_chars","durations","label","duration","ReplayState","constructor","settings","steps","events","this","limit","lines","line","ws","i","codePoint","String","fromCodePoint","push","splitLines","result","timeStamp","event","shiftTimeStamps","ReplayProgress","reset","state","progress","delay","Math","max","elapsed","step","onInput","completed","code","chars","depressedKeys","bump","speed","head","curr","Session","generator","static","text","numLines","getEvents","getLines","getSteps","handleKeyDown","handleKeyUp","handleInput","feedback","computeProgress","shift","mark","index","textInput","numCols","word","nextWord","TextSourceType","typingTestProps","CommonWords","language","ALL","EN","wordList","wordListSize","min","book","EN_ALICE_WONDERLAND","bookParagraphIndex","toCompositeSettings","get","toDuration","textSource","PseudoWords","Book","paragraphIndex","Error","toTextSource","textDisplay","languageOf","useCompositeSettings","useMemo","AnimationFrames","start","callback","cancel","requestAnimationFrame","cancelAnimationFrame","stepper","formatInteger","formatSpeed","setTime","useState","useEffect","frames","useReplayProgress","Para","align","NameValue","name","showMillis","Replay","keyboard","visible","setVisible","useDocumentVisibility","setLines","emptyLines","setDepressedKeys","tasks","delayed","cancelAll","useReplayState","Box","alignItems","justifyContent","cursor","height","Indicator","Metric","unit","Separator","BookSettings","bookContent","Content","updateSettings","paragraphs","content","legend","onChange","set","CommonWordsSettings","slice","formatMessage","useIntl","formatLanguageName","formatNumber","wordCount","avgWordLength","FieldList","OptionList","options","map","item","onSelect","Range","size","TextField","join","readOnly","PseudoWordsSettings","model","words","empty","TextGeneratorSettings","RadioBox","checked","BookParagraphsGenerator","wordIndex","PseudoWordsGenerator","rng","CommonWordsGenerator","splice","TextGeneratorLoader","Date","now","LineTemplate","memo","TestProgress0","formatPercents","style","inlineSize","minimumFractionDigits","maximumFractionDigits","TestProgress","Toolbar","onConfigure","Filler","DurationSwitcher","IconButton","icon","Icon","I","shape","mdi","onClick","compositeSettings","LinkButton","Controller","setView","views","focusRef","useRef","player","session","setSession","nextTest","setProgress","emptyProgress","current","focus","Spacer","wrap","onFocus","onKeyDown","onKeyUp","makeResult","lineTemplate","stats","test","report","speedUnit","handleNext","errors","accuracy","dSpeed","dAccuracy","pSpeed","cdf","pAccuracy","scale","distribution","thresholds","width","Button","tabIndex","setTabIndex","ExplainerBoundary","defaultVisible","TabList","selectedIndex","TypingTestPage","ViewSwitch","Page"],"sourceRoot":""}